<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>{{ exam.title }} - 在线答题</title>
  <link rel="stylesheet" href="/static/css/problem.css">

  <!-- 本地加载 marked.js 和 MathJax -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        packages: {'[+]': ['amsmath', 'amssymb', 'bm']}
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    };
  </script>
  <script src="/static/js/marked.min.js"></script>
  <script src="/static/js/tex-mml-chtml.js"></script>
</head>
<body>

<header>
  <h1>{{ exam.title }}</h1>
  <div class="user-info">
    <a href="/exams" style="color: white;text-decoration: none;">试卷列表</a>
  </div>
</header>

<div class="container">
  <div class="description">
    <h2>试卷信息</h2>
    <p><strong>限时:</strong> {% if exam.time_limit %}{{ exam.time_limit }} 分钟{% else %}不限时间{% endif %}</p>
    <p><strong>题目数量:</strong> {{ exam.questions | length }} 道题</p>
  </div>

  <form method="post" action="{{ url_for('submit_exam', exam_id=exam.exam_id) }}">
    {% for q in exam.questions %}
      <div class="examples">
        <h3>第 {{ loop.index }} 题（{{ '多选' if q.is_multiple else '单选' }}）</h3>
        <div class="markdown-content" style="white-space: pre-wrap;">
          {{ q.question_text }}
        </div>
        {% for opt_key, opt_text in q.options.items() %}
          <label>
            <input type="{{ 'checkbox' if q.is_multiple else 'radio' }}"
                   name="q{{ q.question_id }}{% if q.is_multiple %}[]{% endif %}"
                   value="{{ opt_key }}">
            {{ opt_key }}. {{ opt_text }}
          </label><br>
        {% endfor %}
      </div>
    {% endfor %}
    <button type="submit">提交试卷</button>
  </form>
</div>

<div class="footer">
  <p>&copy; 2025 BCMOJ. Released under the
    <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a>. |
    <a href="/about">关于我们</a>
  </p>
</div>

<script src="/static/js/exam.js"></script>
</body>
</html>
