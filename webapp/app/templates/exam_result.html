<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>试卷成绩详情 - {{ exam.title }}</title>
    <link rel="stylesheet" href="/static/css/exam_result.css" />
</head>
<body>
    <h2>试卷：{{ exam.title }}</h2>
    <p>考生ID: {{ userid }} | 答卷ID: {{ exam_answer.result_id }} | 提交时间: {{ exam_answer.submit_time }}</p>
    <h3>总得分: {{ exam_answer.score }}</h3>

    <table>
        <thead>
            <tr>
                <th>题号</th>
                <th>题目内容</th>
                <th>选项</th>
                <th>用户答案</th>
                <th>正确答案</th>
                <th>是否正确</th>
            </tr>
        </thead>
        <tbody>
            {% for q in question_results %}
            <tr>
                <td>{{ loop.index }}</td>
                <td style="text-align: left;">{{ q.question_text|safe }}</td>
                <td style="text-align: left;">
                    <ul style="list-style-type:none; padding-left: 0; margin:0;">
                        {% for key, val in q.options.items() %}
                            <li>{{ key }}. {{ val }}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td>
                    {% if q.user_answer is iterable and q.user_answer is not string %}
                        {{ q.user_answer|join(', ') }}
                    {% else %}
                        {{ q.user_answer }}
                    {% endif %}
                </td>
                <td>{{ q.correct_answer|join(', ') }}</td>
                <td>
                    {% if q.is_correct %}
                        <span class="status-Accepted">是</span>
                    {% else %}
                        <span class="status-Wrong">否</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="footer">
        <p>&copy; 2025 BCMOJ. Released under the <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a>. | <a href="/about">关于我们</a></p>
    </div>
</body>
</html>
